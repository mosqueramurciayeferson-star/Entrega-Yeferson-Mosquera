{% extends "base.html" %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
  <h2>Reservas <small class="text-muted">({{ total }})</small></h2>
  <div>
    <a class="btn btn-outline-secondary" href="{{ url_for('reservas_export') }}">Exportar CSV</a>
  </div>
</div>

<div class="card">
  <div class="card-body p-0">
    <div class="table-responsive">
      <table class="table table-hover mb-0">
        <thead class="table-light">
          <tr>
            <th>#</th>
            <th>Nombre</th>
            <th>Contacto</th>
            <th>Fechas</th>
            <th>Hab.</th>
            <th>Total</th>
          </tr>
        </thead>
        <tbody>
          {% for r in reservas %}
          <tr>
            <td>{{ r.id }}</td>
            <td>{{ r.nombre }}</td>
            <td>
              <div class="small">{{ r.correo }}</div>
              <div class="small text-muted">{{ r.telefono }}</div>
            </td>
            <td class="small">
              {{ r.fecha_llegada }} → {{ r.fecha_salida }}
            </td>
            <td>{{ r.habitaciones }}</td>
            <td>${{ "%.2f"|format(r.total) }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
  <div class="card-footer d-flex justify-content-between align-items-center">
    <div>Mostrando página {{ page }} de {{ total_pages }}</div>
    <nav>
      <ul class="pagination mb-0">
        {% if page>1 %}
        <li class="page-item"><a class="page-link" href="{{ url_for('reservas', page=page-1) }}">Anterior</a></li>
        {% else %}
        <li class="page-item disabled"><span class="page-link">Anterior</span></li>
        {% endif %}
        {% for p in range(1, total_pages+1) %}
        <li class="page-item {% if p==page %}active{% endif %}"><a class="page-link" href="{{ url_for('reservas', page=p) }}">{{ p }}</a></li>
        {% endfor %}
        {% if page<total_pages %}
        <li class="page-item"><a class="page-link" href="{{ url_for('reservas', page=page+1) }}">Siguiente</a></li>
        {% else %}
        <li class="page-item disabled"><span class="page-link">Siguiente</span></li>
        {% endif %}
      </ul>
    </nav>
  </div>
</div>
{% endblock %}
